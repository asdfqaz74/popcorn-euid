import"./tailwind-xU_d6Hf1.js";import{r as c,t as v,a as g}from"./css-LUmow4Y_.js";import{g as r,a as V}from"./delay-g6vF19wW.js";import{s as b}from"./storage-eNv634Ip.js";import{p as y}from"./pocketbase-UOLpUAtS.js";const L=r(".button-goBack"),I=r(".button-moveBack"),h=r(".login-container"),E=r(".login-form-before");function A(){history.back()}function P(){h.style.transform="translateX(0%)"}L.addEventListener("click",A);I.addEventListener("click",P);E.addEventListener("submit",e=>{e.preventDefault(),h.style.transform="translateX(-50%)"});const d=document.getElementById("phoneNumber"),s=r(".login-button-verify"),i=document.getElementById("agree"),C=/^010\d{4}\d{4}$/;function w(e){const t=e.target.value;console.log(t),C.test(t)?(console.log("ì„±ê³µ"),c(s,"text-gray-500"),v(s,"signUp-verify-valid"),s.removeAttribute("disabled")):(console.log("ì‹¤íŒ¨"),c(s,"signUp-verify-valid"),s.setAttribute("disabled",""))}d.addEventListener("input",w);const S=Math.floor(Math.random()*9e5)+1e5;sessionStorage.setItem("verifyNumber",S);const u=sessionStorage.getItem("verifyNumber");function N(){Array.from(s.classList).includes("signUp-verify-valid")&&(alert(u),console.log(u))}async function U(){const e=r(".login-input-phoneNumber").value;console.log(e);const n=(await y.collection("users").getFullList("phoneNumber")).map(a=>a.phoneNumber).includes(e);console.log(n);try{if(n){N();const B=JSON.stringify(e);localStorage.setItem("phoneNumber",B),console.log("ì €ì¥ ì™„ë£Œ")}else alert("ë“±ë¡ë˜ì§€ ì•Šì€ ë²ˆí˜¸ì…ë‹ˆë‹¤. íšŒì›ê°€ì… í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤! ğŸ˜ƒ"),window.location.href="/src/pages/signUp/";const a=r(".login-input-after"),k=localStorage.getItem("phoneNumber");a.textContent=JSON.parse(k)}catch{alert("í•¸ë“œí°ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")}}s.addEventListener("click",U);const x=r(".login-input-verifyNumber");function F(e){const t=e.target.value;console.log(t),u===t?(console.log("ì„±ê³µ!"),c(i,"bg-gray-500"),v(i,"signUp-agree-valid")):(console.log("ì‹¤íŒ¨!"),c(i,"signUp-agree-valid"),g(i,"bg-gray-500"))}x.addEventListener("input",F);async function $(){const e=Array.from(i.classList).includes("signUp-agree-valid"),t=await y.collection("users").getFullList();if(console.log(d.value),e){let o={isAuth:!0},n=t.find(a=>a.phoneNumber===d.value);b("userId",n.id),b("auth",o),alert("ë¡œê·¸ì¸ ì„±ê³µ! ì˜¤ëŠ˜ë„ í˜ì°¨ê²Œ ë‹¬ë ¤ë³´ì•„ìš” ğŸ’ªğŸ»"),window.location.href="/src/pages/story/"}else alert("ì¸ì¦ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.")}i.addEventListener("click",$);const l=r(".signUp-button-Reverify"),D=V(".timer-button");let m=null,f=!1;function J(){const e=r(".target__time"),t=60;f?(clearInterval(m),e.textContent="",p(t,e),N()):p(t,e)}function p(e,t){let o,n;m=setInterval(function(){o=parseInt(e/60,10),n=parseInt(e%60,10),o=o<10?"0"+o:o,n=n<10?"0"+n:n,t.textContent=`${o} : ${n}`,--e<0&&(clearInterval(m),g(l,"bg-gray-500"),g(l,"text-background"),alert("ì‹œê°„ì´ˆê³¼! ì¸ì¦ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ë°›ì•„ì£¼ì„¸ìš” â³"),f=!1)},1e3),f=!0}D.forEach(e=>{e.addEventListener("click",J)});function M(){Array.from(l.classList).includes("bg-gray-500")&&Array.from(l.classList).includes("text-background")&&alert(u)}l.addEventListener("click",M);
